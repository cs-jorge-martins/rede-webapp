<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*
 Projeto: conciliation
 Author/Empresa: Rede
 Copyright (C) 2016 Redecard S.A.
 */

(function() {
    &#39;use strict&#39;;

    angular
        .module(&#39;Conciliador&#39;)
        .directive(&#39;rcTimeline&#39;, RcTimeline);

    function RcTimeline() {

        return {
            restrict: &#39;E&#39;,
            templateUrl: &#39;app/views/directives/rc-timeline.html&#39;,
            scope: {
                cssClass: &quot;=&quot;,
                dateRange: &quot;=&quot;,
                maxDateRange: &quot;=&quot;,
                monetaryValues: &quot;=&quot;,
                labelInitialValue: &quot;=&quot;,
                labelFinalValue: &quot;=&quot;,
                initialValue: &quot;=&quot;,
                finalValue: &quot;=&quot;,
                totalValue: &quot;=&quot;,
                labelTotalValue: &quot;=&quot;
            },
            controller: Controller
        };

        function Controller($scope) {

            Init();

            function Init() {
                GetPercentage();
            }

            $scope.$watchGroup([&#39;initialValue&#39;, &#39;finalValue&#39;], function(newValues, oldValues) {
                GetPercentage();
            }, true);

            
            function GetPercentage() {

                var xCompareValue = $scope.totalValue ? $scope.totalValue : $scope.finalValue;

                if($scope.initialValue === 0 &amp;&amp; xCompareValue === 0) {
                    $scope.timeLinePercentage = 0;
                } else {
                    $scope.timeLinePercentage = $scope.initialValue / xCompareValue * 100;
                }

            }

        }
    }

})();
</pre>
</body>
</html>
